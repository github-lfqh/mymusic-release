(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61459da4"],{c74c:function(t,e,s){"use strict";s.r(e);var i=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("section",{staticClass:"player",style:{background:"url("+t.pic+") no-repeat"}},[s("div",{staticClass:"cover"}),s("div",{staticClass:"player-disc flex-center"},[s("div",{staticClass:"mask flex-center",style:{transform:"rotate("+t.angle+"deg)"}},[s("img",{staticClass:"pic",attrs:{src:t.pic}})])]),s("div",{staticClass:"fill"}),t.showWords?s("div",{staticClass:"player-songWords"},[s("ul",{directives:[{name:"show",rawName:"v-show",value:!t.noWord,expression:"!noWord"}],ref:"ul"},t._l(t.oLRC.ms,function(e,i){return s("li",{key:i},[t._v(t._s(e.c))])}),0),s("h2",{directives:[{name:"show",rawName:"v-show",value:t.noWord,expression:"noWord"}]},[t._v("歌曲库里暂无这首歌的歌词或者这首歌!")])]):t._e(),s("audio",{ref:"audio",on:{durationchange:t.durationchange,timeupdate:t.timeupdate,ended:t.ended,error:t.error}},[s("source",{attrs:{src:t.src}})]),s("div",{staticClass:"fill"}),s("div",{staticClass:"progressBar"},[s("span",{staticClass:"currentTime"},[t._v(t._s(t.currentTime))]),s("input",{ref:"range",style:{backgroundSize:t.progress+" 100%"},attrs:{type:"range"},on:{input:t.changeProgress}}),s("span",{staticClass:"duration"},[t._v(t._s(t.duration))])]),s("div",{staticClass:"control"},[s("span",{staticClass:"pre",on:{click:t.pre}}),s("span",{staticClass:"pause",class:{play:t.btnShow},on:{click:t.changeStatus}}),s("span",{staticClass:"next",on:{click:t.next}})]),s("router-link",{staticClass:"back flex-center",attrs:{to:"/home"}})],1)},r=[],a=(s("f10e"),s("f91a"),s("0bb1"),s("40f8"),s("612f"),s("ea65"),s("48fb"),s("cca6"),s("66ef")),n=s.n(a),o=s("a4aa"),l=s("ce02"),h=s.n(l),c={data:function(){return{isplay:!0,currentTime:"00:00",duration:"00:00",progress:"0%",ismove:!1,btnShow:!0,data:{},angle:0,timer:null,oLRC:{ti:"",ar:"",al:"",by:"",offset:0,ms:[]},lineNo:0,played:!1,noWord:!1,pic:h.a,src:n.a,index:0,showWords:!0}},methods:{durationchange:function(){this.duration=this.timeFormat(this.$refs.audio.duration)},timeupdate:function(){if(this.ismove){for(var t in this.$refs.audio.currentTime=this.$refs.range.value/100*this.$refs.audio.duration,this.oLRC.ms)if(this.oLRC.ms[t].t>this.$refs.audio.currentTime){this.lineNo=t-1;break}}else this.$refs.range.value=this.$refs.audio.currentTime/this.$refs.audio.duration*100;this.currentTime=this.timeFormat(this.$refs.audio.currentTime),this.progress=this.$refs.range.value+"%",this.ismove=!1,this.lineNo>=this.oLRC.ms.length||this.oLRC.ms[this.lineNo].t<=this.$refs.audio.currentTime&&this.heightLight()},changeProgress:function(){this.ismove=!0,this.progress=this.$refs.range.value+"%"},changeStatus:function(){this.btnShow=!this.btnShow,this.isplay=!this.isplay,this.isplay?(this.played&&(document.querySelector(".light").removeAttribute("class"),this.$refs.ul.style.transform="translateY(0)",this.lineNo=0,this.currentTime="00:00",this.progress="0%",this.$refs.audio.currentTime=0,this.played=!1,this.angle=0),this.autoRatate(),this.$refs.audio.play()):(this.$refs.audio.pause(),clearInterval(this.timer))},timeFormat:function(t){var e=Math.floor(t/60),s=Math.round(t%60);return e.toString().padStart(2,0)+":"+s.toString().padStart(2,0)},parseLrc:function(t){if(0!=t.length){var e=t.split("\n"),s=!0,i=!1,r=void 0;try{for(var a,n=e[Symbol.iterator]();!(s=(a=n.next()).done);s=!0){var o=a.value;o=o.replace(/(^\s*)|(\s*$)/g,"");var l=o.substring(o.indexOf("[")+1,o.indexOf("]")),h=l.split(":");if(isNaN(parseInt(h[0])))for(var c in this.oLRC)"ms"!=c&&c==h[0].toLowerCase()&&(this.oLRC[c]=h[1]);else{var u=o.match(/\[(\d+:.+?)\]/g),d=0,f=!0,m=!1,g=void 0;try{for(var p,v=u[Symbol.iterator]();!(f=(p=v.next()).done);f=!0){var y=p.value;d+=y.length}}catch(C){m=!0,g=C}finally{try{f||null==v.return||v.return()}finally{if(m)throw g}}var $=o.substring(d);if(""!=$)for(var S in u){var w=u[S].substring(1,u[S].length-1),x=w.split(":");this.oLRC.ms.push({t:(60*parseFloat(x[0])+parseFloat(x[1])).toFixed(3),c:$})}}}}catch(C){i=!0,r=C}finally{try{s||null==n.return||n.return()}finally{if(i)throw r}}0==this.oLRC.ms.length&&(this.noWord=!0)}},autoRatate:function(){var t=this;this.timer=setInterval(function(){t.angle+=10},1e3)},heightLight:function(){var t=this.$refs.ul.getElementsByTagName("li"),e=!0,s=!1,i=void 0;try{for(var r,a=t[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var n=r.value;n.removeAttribute("class")}}catch(o){s=!0,i=o}finally{try{e||null==a.return||a.return()}finally{if(s)throw i}}t[this.lineNo].className="light",this.lineNo>2&&(this.$refs.ul.style.transform="translateY("+-20*(this.lineNo-2)+"px)"),this.lineNo++},ended:function(){this.played=!0,this.btnShow=!0,this.isplay=!1,clearInterval(this.timer)},error:function(){clearInterval(this.timer),this.progress="0%",this.$refs.range.value=0,this.noWord=!0},pre:function(){var t=this;if(this.index>0){var e=this.index-1,s=this.$store.state.songs[e];localStorage.setItem("data",JSON.stringify(s)),localStorage.setItem("index",e),this.angle=0,localStorage.setItem("currentTime",0),this.init()}this.showWords=!1,this.$nextTick(function(){return t.showWords=!0})},next:function(){var t=this;if(this.index<this.$store.state.songs.length-1){var e=this.index+1,s=this.$store.state.songs[e];localStorage.setItem("data",JSON.stringify(s)),localStorage.setItem("index",e),this.angle=0,localStorage.setItem("currentTime",0),this.init()}this.showWords=!1,this.$nextTick(function(){return t.showWords=!0})},init:function(){var t,e=this;this.data=JSON.parse(localStorage.getItem("data")),this.index=parseInt(localStorage.getItem("index")),"tm"==this.data?(this.src=n.a,t=o["a"].t,this.parseLrc(t)):(this.$refs.audio.src=this.data.url,t=this.data.lrc,this.$axios.get(t).then(function(t){e.parseLrc(t)}),this.pic=this.data.pic),this.$refs.audio.autoplay=!0,this.$refs.audio.load(),this.autoRatate(),this.$refs.audio.currentTime=parseInt(localStorage.getItem("currentTime")),this.currentTime=this.timeFormat(this.$refs.audio.currentTime),this.$refs.range.value=this.$refs.audio.currentTime/this.$refs.audio.duration*100,this.progress=this.$refs.range.value+"%"}},mounted:function(){this.init()},beforeDestroy:function(){var t=this.$refs.audio.currentTime;localStorage.setItem("currentTime",t),this.$store.commit("setShowPlayArea",!0)}},u=c,d=(s("d272"),s("17cc")),f=Object(d["a"])(u,i,r,!1,null,"3ac5ad99",null);e["default"]=f.exports},d272:function(t,e,s){"use strict";var i=s("dd23"),r=s.n(i);r.a},dd23:function(t,e,s){}}]);
//# sourceMappingURL=chunk-61459da4.73073751.js.map